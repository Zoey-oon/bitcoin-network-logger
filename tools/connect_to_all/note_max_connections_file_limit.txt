# Get file limit
ulimit -Sn

# Edit /etc/security/limits.conf
# Append the line:

X *                -       nofile          100000

*                hard    nofile          500000
*                soft    nofile          100000

# Get file limit
ulimit -Sn


Then:
	sudo sysctl -w fs.file-max=500000
To apply the limit immediately:
	sysctl -w fs.file-max=500000